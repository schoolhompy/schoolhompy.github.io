---
layout: post
title: javascript test tool - jasmine + karma + vscode + chrome debugging
date: '2018-06-21T07:12:00.001-07:00'
author: schoolhompy
tags: 
modified_time: '2018-06-21T07:12:27.360-07:00'
blogger_id: tag:blogger.com,1999:blog-4954243635432022205.post-4079548868756080723
blogger_orig_url: https://yunhos.blogspot.com/2018/06/javascript-test-tool-jasmine-karma.html
---

일단 이곳을 참고한다.<br /><br />http://blog.mlewandowski.com/Debugging-Karma-tests-with-VSCode.html<br /><br />보기어렵다...<br /><br />요약한다.<br />0.node설치한다.<br />1. VSCODE를 설치한다.<br />2.<b>debugger-for-chrome extension</b> 를 설치한다. 당근 비쥬얼코드에서..Extension 으로..<br />3.노드 글로벌 모듈로 요맨,카르마 생성기? 설치한다.0에서 노드가 설치되어있으므로 엔피엠 명령어가 가능.<br /><b>npm install -g yo generator-karma</b><br />4.아무폴더나 만든다. (sipal)<br />5.sipal 폴더로 가서,<br /><b>yo karma --browsers "Chrome" --app-files "src/**/*.js" --test-files "test/**/*.js" --base-path ".."</b><br />실행한다. 그러면 sipal/test/karma.conf.js 파일이 생긴다. 카르마 제네레이터를 설치했으니 가능한 명령이다.<br />6.visual studio code 에서 열기위해<br />sipal 폴더에서<br /><b>code . test/karma.conf.js</b><br />실행한다.<br />7.이것저것 써있는 설정값들이 보이는데, 아무데나<br /><br /><b>&nbsp; customLaunchers: {</b><br /><b>&nbsp; &nbsp; ChromeDebugging: {</b><br /><b>&nbsp; &nbsp; &nbsp; base: 'Chrome',</b><br /><b>&nbsp; &nbsp; &nbsp; flags: [ '--remote-debugging-port=9333' ]</b><br /><b>&nbsp; &nbsp; }</b><br /><b>&nbsp; },</b><br /><br />를 추가하고나서 browsers라고 되어있는 설정값부분을 아래처럼 바꿔준다.<br /><br /><br />&nbsp;<b> &nbsp; browsers: [</b><br /><b>&nbsp; &nbsp; &nbsp; 'ChromeDebugging'</b><br /><b>&nbsp; &nbsp; ],</b><br /><br />8. 그리고 vscode에서 F1을 눌러서 코딱지만한 창에<br /><br /><b>Debug: Open launch.json</b><br /><br />을 입력하면, 그냥&nbsp;&nbsp;.vscode/launch.json 가 생성되는 경우가있고.<br />때때로, Chrome, Node,....등 환경을 선택하라고 한다. 아무거나 상관없다.<br />어차피 다른 내용으로 덮어씌울꺼니까.<br /><br />자동으로 .vscode/launch.json 파일이 에디터에서 열린다.<br />그내용을 모두 지우고,<br /><br /><br /><b>{</b><br /><b>&nbsp; "version": "0.2.0",</b><br /><b>&nbsp; "configurations": [</b><br /><b>&nbsp; &nbsp; {</b><br /><b>&nbsp; &nbsp; &nbsp; "type": "chrome",</b><br /><b>&nbsp; &nbsp; &nbsp; "request": "attach",</b><br /><b>&nbsp; &nbsp; &nbsp; "name": "Attach Karma Chrome",</b><br /><b>&nbsp; &nbsp; &nbsp; "address": "localhost",</b><br /><b>&nbsp; &nbsp; &nbsp; "port": 9333,</b><br /><b>&nbsp; &nbsp; &nbsp; "pathMapping": {</b><br /><b>&nbsp; &nbsp; &nbsp; &nbsp; "/": "${workspaceRoot}",</b><br /><b>&nbsp; &nbsp; &nbsp; &nbsp; "/base/": "${workspaceRoot}/"</b><br /><b>&nbsp; &nbsp; &nbsp; }</b><br /><b>&nbsp; &nbsp; }</b><br /><b>&nbsp; ]</b><br /><b>}</b><br /><br />로 덮어씌우고 저장한다.<br /><br /><br />9.테스트팅을 위해서<br /><br />sipal/src/myFunction.js<br />파일을 만들고<br /><br /><b>window.myFunction = function( e ) {</b><br /><b>&nbsp; if ( e &gt;= 10 ) {</b><br /><b>&nbsp; &nbsp; return true;</b><br /><b>&nbsp; } else {</b><br /><b>&nbsp; &nbsp; return false;</b><br /><b>&nbsp; }</b><br /><b>}</b><br /><br />내용으로 저장한다.<br /><br />또.<br /><br />sipal/test/example.js<br />만들고<br /><br /><b>describe( "A suite is just a function", function() {</b><br /><b>&nbsp; it( "and so is a spec", function() {</b><br /><b>&nbsp; &nbsp; let res = myFunction( 15 );</b><br /><b><br /></b><b>&nbsp; &nbsp; expect( res ).toBe( true );</b><br /><b>&nbsp; } );</b><br /><b>} );</b><br /><br />내용으로 저장한다.<br /><br />10.npm test 를 실행한다.<br />나의 경우는<br /><b>C:\jasmin\sipal&gt;npm test</b><br /><br />11. 디버깅하자.<br /><br />vscode 에서 해충방지 모양의 버튼을 누르면<br /><b><span style="background-color: white; font-size: 16px;">▶</span>Attach Karma Chrome</b><br />를 실행한다.<br />그리고 여기저기 브레이크 포인트를 걸고, 크롬에서 새로고침 해보면 된다.<br /><br />--------------------------<br />참 더럽게 복잡하네...ㅆㅂ