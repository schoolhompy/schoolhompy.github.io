---
layout: post
title: Cocoa Touch Framework 을 이용해서 공통모듈 만들기
date: '2019-10-21T00:53:00.000-07:00'
author: schoolhompy
tags:
- "--아이폰"
modified_time: '2019-10-21T06:10:07.115-07:00'
blogger_id: tag:blogger.com,1999:blog-4954243635432022205.post-7293300092995992123
blogger_orig_url: https://yunhos.blogspot.com/2019/10/cocoa-touch-framework.html
---

안드로이드에서 aar 화일을 만들어 쓰듯이, Xcode 6 부터는 개발자가 Framework 프로젝트를&nbsp; 만들어서 여러프로젝트에 공통으로 사용할수 있도록 되었다.<br /><br />1.일단 워크스페이스부터 따로 만든다.<br />2.새 프로젝트를 만들어야 하는데 [cocoa touch framework] 를 선택해서 새로 만든다.<br />&nbsp;<span style="color: red;">맨 마지막 프로젝트 폴더 선택하는 부분에서&nbsp; add to 와 group 선택박스를 아까 생성한 워크스페이스로 선택한다.</span><br />3.프로젝트 구성을 보면 프레임헤더화일, 테스트 , 프로덕트가 있고 안에 .framework 파일이 있는데 아직 빌드를 안해서 빨강색이다.<br />4.프레임헤더를 열어보면 맨마지막줄에 public , 공개로 사용할 헤더를 적어주면 외부에서 해당 기능을 사용할수 있게된다라고 되어있다.<br />#import &lt;myframework/Car.h&gt; 라고 하자<br />5.이제 새화일-&gt;코코아터치 클래스 를 선택해서 Car.h , Car.m 을 만들자.<br />6.car 클래스는 평소대로 하고싶은 코딩을 한다.<br />7.이제 중요.<br />8. Car.h 를 선택하면 오른쪽 속성 판넬에 [Target MemberShip] 항목에 프레임이름과 private|public|project 가 있다.&nbsp; 외부에서&nbsp; car 클래스에 접근하려면&nbsp; 하려면 public 으로 해야 된다.<br />9.그위의 Location 도 Relative to Group 으로 지정한다.<br />10. 왼쪽의 프로젝트 파란 놈을 클릭하고 항목에서 [Build Active Architecture Only] 를 No 로 해주어야 다른 플랫폼에서도 작동할수 있게된다.<br />11.프레임워크 프로젝트에서 빌드를 한다. 이떄 호환성을 위해서 에디터 상단의 빌드 디바이스를 [제너릭 디바이스] 로 지정하고 빌드한다.<br />12.왼쪽의 products/myframework.framework 파일이 생성되면 왼쪽으로 가는 화살표를 클릭해서 해당 폴더에서 파일을 복사해논다.<br />13.이제 아까만든 프레임워크를 사용할 프로젝트를 만든다. 워크스페이스, 프로젝트 폴더는 따로 만들어서 완전히 새로운 프로젝트를 구성한다.<br />14.새로운 프로젝트를 만들었으면 프레임워크를 보관할 임의의 폴더(그룹)를 만든다(임시로 framework 라고 만들었다. )<br />15. 만든 폴더에 아까의 프레임워크를 붙여넣는다.<br />16. 프레임워크를 사용하려면 m 파일에서 프레임워크에서 공개(public)으로 지정한 헤더를 임포트해서 해당 클래스를 사용하면된다.<br /><br /><div style="caret-color: rgb(0, 0, 0); font-family: HelveticaNeue; font-size: 12px; text-size-adjust: auto;">#import<span class="Apple-converted-space">&nbsp;</span>&lt;myframework/Car.h&gt;</div><div style="caret-color: rgb(0, 0, 0); font-family: HelveticaNeue; font-size: 12px; text-size-adjust: auto;">...</div><div style="background-color: white; caret-color: rgb(0, 0, 0); font-family: Menlo; font-size: 11px; font-stretch: normal; line-height: normal; text-size-adjust: auto;">&nbsp; &nbsp;<span class="Apple-converted-space">&nbsp;</span>Car *car = [[Car alloc] initWithName:<span style="color: #d12f1b;">@"audi"</span>&nbsp;<span class="Apple-converted-space">&nbsp;</span>year:<span style="color: #272ad8;">1990</span>];</div><div style="caret-color: rgb(0, 0, 0); font-family: HelveticaNeue; font-size: 12px; text-size-adjust: auto;"></div><div style="background-color: white; caret-color: rgb(0, 0, 0); font-family: Menlo; font-size: 11px; font-stretch: normal; line-height: normal; text-size-adjust: auto;">&nbsp; &nbsp; [car info];</div><div style="background-color: white; caret-color: rgb(0, 0, 0); font-family: Menlo; font-size: 11px; font-stretch: normal; line-height: normal; text-size-adjust: auto;">17.이상태에서 빌드시에 에러가 나오기도 하는데&nbsp; x86_64 관련에러는 프레임워크로 돌아가서 프로젝트 설정에 [Build Archtecture Active Only] 를 No 로 설정하고 다시 빌드후에 라이브러리를 다시 현재 작업 프로젝트에 던져 놓으면 된다.</div><div style="background-color: white; caret-color: rgb(0, 0, 0); font-family: Menlo; font-size: 11px; font-stretch: normal; line-height: normal; text-size-adjust: auto;"><span style="background-color: transparent; font-family: &quot;helveticaneue&quot;; font-size: 12px;">18.이제 실행을 시켜보면&nbsp;</span><b style="background-color: transparent; text-size-adjust: auto;">&nbsp;image not found </b><span style="background-color: transparent; text-size-adjust: auto;">이 나온다.</span></div><div style="background-color: white; caret-color: rgb(0, 0, 0); font-family: Menlo; font-size: 11px; font-stretch: normal; line-height: normal; text-size-adjust: auto;"><span style="background-color: transparent; text-size-adjust: auto;">18. 속성의 general 항목의ㄹ embedded binaries 항목에&nbsp;</span><span style="background-color: transparent;">myframework.framework을 추가하면 된다.</span></div><div style="background-color: white; caret-color: rgb(0, 0, 0); font-family: Menlo; font-size: 11px; font-stretch: normal; line-height: normal; text-size-adjust: auto;"><span style="background-color: transparent;"><br /></span></div><div style="background-color: white; caret-color: rgb(0, 0, 0); font-family: Menlo; font-size: 11px; font-stretch: normal; line-height: normal; text-size-adjust: auto;"><span style="background-color: transparent;">*&nbsp;</span>&nbsp;x86_64&nbsp; 관련 에러가 계속 뜨고, 삽질을 계속함..<br /><br />참고사이트<br /><br /><a href="http://theeye.pe.kr/archives/2254">http://theeye.pe.kr/archives/2254</a><br /><a href="https://qiita.com/kakipo/items/3cd87e00bc96bc3888b2">https://qiita.com/kakipo/items/3cd87e00bc96bc3888b2</a><br /><a href="https://qiita.com/sachiko-kame/items/be548a7942e6c22a1828">https://qiita.com/sachiko-kame/items/be548a7942e6c22a1828</a><br /><br />정적라이브러리형태로 배포하기<br /><a href="http://theeye.pe.kr/archives/2750">http://theeye.pe.kr/archives/2750</a><br /><br /><br />-추가로 framework 파일에 이미지등을 넣고 싶을때는 이렇게 해본다<br />1.프로젝트폴더밑에 jpg/testimg.png 를 만들고 넣는다.<br />2.프로젝트속성 Build Phases에 Copy Files 속성을 추가하고 jpg 폴더를 던져넣는다. 그리고 Destination 은 Frameworks 로 지정한다.<br />3.프레임워크의 파일내에서 해당 이미지를 사용해본다.<br /><div class="p1"><br /></div><div class="p2">-(<span class="s1">UIImage</span>*)image2</div><div class="p2">{</div><div class="p3"><span class="s2"><span class="Apple-converted-space">&nbsp; &nbsp; </span></span><span class="s1">NSBundle</span><span class="s2"> *b = [</span><span class="s1">NSBundle</span><span class="s2"> </span>bundleForClass<span class="s2">:[</span><span class="s3">self</span><span class="s2"> </span>class<span class="s2">]];</span></div><div class="p3"><span class="s2"><span class="Apple-converted-space">&nbsp; &nbsp; </span></span><span class="s3">return</span><span class="s2"> [</span><span class="s1">UIImage</span><span class="s2"> </span>imageNamed<span class="s2">:</span><span class="s4">@"Frameworks/jpg/img.png"</span><span class="s2"> </span>inBundle<span class="s2">:b </span>compatibleWithTraitCollection<span class="s2">:</span><span class="s3">nil</span><span class="s2">];</span></div><style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; background-color: #ffffff; min-height: 14.0px} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #000000; background-color: #ffffff} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #3e1e81; background-color: #ffffff} span.s1 {color: #703daa} span.s2 {color: #000000} span.s3 {color: #ba2da2} span.s4 {color: #d12f1b} </style>       <br /><div class="p2">}</div>4. 빌드한다.<br />5.사용하고자 하는 프로젝트에서 프레임워크내의 메소드를 호줄해서 UIImageView에 적용해본다.<br /><div class="p1"><br /></div><style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; background-color: #ffffff; min-height: 14.0px} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #000000; background-color: #ffffff} span.s1 {color: #4f8187} span.s2 {color: #3e1e81} span.s3 {color: #31595d} </style>   <br /><div class="p2"><span class="Apple-converted-space">&nbsp; &nbsp;&nbsp;</span>[<span class="s1">_img</span> <span class="s2">setImage</span>:[car <span class="s3">image2</span>]];</div><div class="p2"><br /></div><div class="p2"><br /></div><br /></div>