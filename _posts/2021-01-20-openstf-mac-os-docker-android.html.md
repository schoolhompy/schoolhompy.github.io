---
layout: post
title: OpenSTF 를 mac os 의 docker 에서 실행해서 Android 단말테스트 과정을 좀더 쉽게 하자
date: '2021-01-20T23:24:00.002-08:00'
author: schoolhompy
tags:
- docker
- adb
- openstf
- android
modified_time: '2021-01-20T23:24:50.883-08:00'
thumbnail: https://1.bp.blogspot.com/-nWk9j-gR17k/YAkrg_DaA_I/AAAAAAABGWI/sN5g2-gFKdYWp8lIqoXeNioC121eLMlfgCLcBGAsYHQ/s72-c/Screen%2BShot%2B2021-01-21%2Bat%2B16.18.32.png
blogger_id: tag:blogger.com,1999:blog-4954243635432022205.post-3274096793603777968
blogger_orig_url: https://yunhos.blogspot.com/2021/01/openstf-mac-os-docker-android.html
---

<p>&nbsp;Android단말 테스트할때 기종별로 OS버젼별로 손에 들고 하는게 귀찮을때 다른 큰회사들은 어케하나 고민해보았다. 물론 에뮬에서도 버젼별 기종별 해보는 것이 가능하지만 앱테스트시에는 실기기에서 하는것을 기본으로 해야 되서...</p><p>다행히 Smartphone Test Farm 이라는 솔류션이 있어서 usb로 실기기를 연결하면 웹인터페이스로 여러개의 연결된 기기를 마우스를 이용하여 테스트할수 있다.</p><p>실기기라 여러군데서 접속해도 같은 화면을 보게되지만(ㅎㅎ 뭐..동작확인할때 오히려 다같이 보여줘서 좋을지도), 일단 웹브라우져에서 해볼수 있다는게 매력이다.</p><p><br /></p><p>일단 구축은 openSTF, rethinkdb,adb연동등 아주 빡세 보이는데, 다행히 일본사람이 docker-compose파일로 잘 세팅되도록 해놓은게 있어서 그걸 사용하면 10분? 만에 구축이 된다.</p><p>docker라는게 없었다면 ,1주-1달 고생하다가 그냥 포기했을텐데 ㅋ 세상좋아.</p><p>일본사람이 정리한거:https://qiita.com/KazaKago/items/26db0f68ba224eb094d3</p><p>내가 해본 docker-compose.yml ( 뭐 바꾼거 없다)</p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;">sion: '2'</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;">services:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; </span>db:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>image: rethinkdb</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>command: rethinkdb --bind all</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>ports:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>- 8082:8080</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>volumes:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>- db_data:/data</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; </span>stf:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>image: openstf/stf</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>ports:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>- 7100:7100</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>- 7110:7110</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>- 7400-7700:7400-7700</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>links:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>- db</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>environment:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>- RETHINKDB_PORT_28015_TCP=tcp://db:28015</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; </span>- RETHINKDB_ENV_DATABASE=stf</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; &nbsp; </span>command: stf local --allow-remote --public-ip 당신의아이피 --adb-host docker.for.mac.localhost</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;">volumes:</span></p><p class="p1" style="background-color: rgba(0, 0, 0, 0.9); color: #2fff12; font-family: D2Coding; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; line-height: normal; margin: 0px;"><span class="s1" style="font-variant-ligatures: no-common-ligatures;"><span class="Apple-converted-space">&nbsp; </span>db_data:</span></p><p><br /></p><p>당신의아이피는 본인 아이피로 바꿈.</p><p>docker-compose up 하면 저기 yml 파일을 읽어서 자동으로 기동한다.</p><p>웹브라우져에서 http://당신의아이피:7100 접속하면 똭. 좋아!&nbsp;</p><p>마우스자동화매크로 프로그램등을 이용하면 자동화도 가능하지 않을까 생각이...</p><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-nWk9j-gR17k/YAkrg_DaA_I/AAAAAAABGWI/sN5g2-gFKdYWp8lIqoXeNioC121eLMlfgCLcBGAsYHQ/s1522/Screen%2BShot%2B2021-01-21%2Bat%2B16.18.32.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="961" data-original-width="1522" src="https://1.bp.blogspot.com/-nWk9j-gR17k/YAkrg_DaA_I/AAAAAAABGWI/sN5g2-gFKdYWp8lIqoXeNioC121eLMlfgCLcBGAsYHQ/s320/Screen%2BShot%2B2021-01-21%2Bat%2B16.18.32.png" width="320" /></a></div><br /><p><br /></p>