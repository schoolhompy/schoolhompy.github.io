---
layout: post
title: IOS 의  GCD ( Grand Central Dispatch) 로 쓰레드처리를 편하고 안전하게.
date: '2019-10-21T06:03:00.000-07:00'
author: schoolhompy
tags:
- "--아이폰"
modified_time: '2019-10-21T06:03:49.170-07:00'
blogger_id: tag:blogger.com,1999:blog-4954243635432022205.post-1805000851639234666
blogger_orig_url: https://yunhos.blogspot.com/2019/10/ios-gcd-grand-central-dispatch.html
---

쓰레드의 락, 동기화 이런거 신경쓰지 않고 GCD를 사용하여 메인 쓰레드에 단순히 dispatch 하면 걍 실행된다능.<br /><br />헤더파일에서<br />     <style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #ba2da2; background-color: #ffffff} span.s1 {color: #ba2da2} span.s2 {color: #703daa} </style>  <br /><div class="p1"><span class="s1">@interface</span> SingleToneSample : <span class="s2">NSObject</span></div><div class="p1">+ (<span class="s1">instancetype</span>) sharedInstance;</div><div class="p2">@end</div><br /><br />처럼 간단하게 공개용 함수만들고 구현파일에서는<br /><br />     <style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #000000; background-color: #ffffff} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #000000; background-color: #ffffff; min-height: 13.0px} span.s1 {color: #ba2da2} span.s2 {color: #4f8187} span.s3 {color: #703daa} span.s4 {color: #78492a} span.s5 {color: #3e1e81} </style>  <div class="p1">+(<span class="s1">instancetype</span>)sharedInstance {</div><div class="p1"><span class="Apple-converted-space">&nbsp; &nbsp; </span><span class="s1">static</span> <span class="s2">SingleToneSample</span> *shared = <span class="s1">nil</span>;</div><div class="p2"><span class="Apple-converted-space">&nbsp;&nbsp; &nbsp;</span></div><div class="p1"><span class="Apple-converted-space">&nbsp; &nbsp; </span><span class="s1">static</span> <span class="s3">dispatch_once_t</span> onceToken;</div><div class="p1"><span class="Apple-converted-space">&nbsp; &nbsp; </span><span class="s4">dispatch_once</span>(&amp;onceToken, ^{</div><div class="p1"><span class="Apple-converted-space">&nbsp; &nbsp; &nbsp; &nbsp; </span>shared = [[<span class="s2">SingleToneSample</span> <span class="s5">alloc</span>] <span class="s5">init</span>];</div><div class="p2"><span class="Apple-converted-space">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p1"><span class="Apple-converted-space">&nbsp; &nbsp; </span>});</div><div class="p2"><span class="Apple-converted-space">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p1"><span class="Apple-converted-space">&nbsp; &nbsp; </span><span class="s1">return</span> shared;</div><span style="background-color: white; font-family: Menlo; font-size: 11px;">}</span><br /><br />처럼 실체를 만들면된다.<br /><br /><br />참고<br /><br /><a href="https://padgom.tistory.com/entry/iOS-%EA%B8%B0%EB%B3%B8-GCDGrand-Central-Dispatch-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0">https://padgom.tistory.com/entry/iOS-%EA%B8%B0%EB%B3%B8-GCDGrand-Central-Dispatch-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0</a>