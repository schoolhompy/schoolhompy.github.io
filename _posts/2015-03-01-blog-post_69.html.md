---
layout: post
title: 앨범에서 마지막 찍은 사진 가져오기
date: '2015-03-01T16:07:00.001-08:00'
author: schoolhompy
tags:
- "--아이폰"
modified_time: '2017-06-25T02:22:52.627-07:00'
blogger_id: tag:blogger.com,1999:blog-4954243635432022205.post-6615546238352833508
blogger_orig_url: https://yunhos.blogspot.com/2015/03/blog-post_69.html
---

<p class="p1"><span class="s1"><span style="color:#666666;font-family:dotum;">    </span></span>ALAssetsLibrary<span class="s1"><span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span style="color:#666666;">*library = [[</span></span></span>ALAssetsLibrary<span class="s1"><span class="Apple-converted-space"><span style="color:#666666;font-family:dotum;"> </span></span></span>alloc<span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">]</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>init<span class="s1"><span style="color:#666666;font-family:dotum;">];</span></span></p><br/><p class="p2"></p><br/><p class="p3"><span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">   </span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>// Enumerate just the photos and videos group by using ALAssetsGroupSavedPhotos.</p><br/><p class="p1"><span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">    [library</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>enumerateGroupsWithTypes<span class="s1"><span style="color:#666666;font-family:dotum;">:</span></span>ALAssetsGroupSavedPhotos<span class="s1"><span class="Apple-converted-space"><span style="color:#666666;font-family:dotum;"> </span></span></span>usingBlock<span class="s1"><span style="color:#666666;font-family:dotum;">:^(</span></span>ALAssetsGroup<span style="font-family:dotum;"><span class="s1"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span style="color:#666666;">*group,</span></span><span class="s2"><span style="color:#666666;">BOOL</span></span><span class="s1"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span style="color:#666666;">*stop) {</span></span></span></p><br/><p class="p2"></p><br/><p class="p3"><span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">       </span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>// Within the group enumeration block, filter to enumerate just photos.</p><br/><p class="p1"><span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">        [group</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>setAssetsFilter<span class="s1"><span style="color:#666666;font-family:dotum;">:[</span></span>ALAssetsFilter<span class="s1"><span class="Apple-converted-space"><span style="color:#666666;font-family:dotum;"> </span></span></span>allPhotos<span class="s1"><span style="color:#666666;font-family:dotum;">]];</span></span></p><br/><p class="p2"></p><br/><p class="p3"><span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">       </span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>// Chooses the photo at the last index</p><br/><p class="p1"><span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">        [group</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>enumerateAssetsAtIndexes<span class="s1"><span style="color:#666666;font-family:dotum;">:[</span></span>NSIndexSet<span class="s1"><span class="Apple-converted-space"><span style="color:#666666;font-family:dotum;"> </span></span></span>indexSetWithIndex<span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">:([group</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>numberOfAssets<span style="font-family:dotum;"><span class="s1"><span style="color:#666666;">] -</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span><span class="s3"><span style="color:#666666;">1</span></span><span class="s1"><span style="color:#666666;">)]</span></span></span>options<span style="font-family:dotum;"><span class="s1"><span style="color:#666666;">:</span></span><span class="s3"><span style="color:#666666;">0</span></span><span class="s1"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>usingBlock<span class="s1"><span style="color:#666666;font-family:dotum;">:^(</span></span>ALAsset<span class="s1"><span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span style="color:#666666;">*alAsset,</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>NSUInteger<span style="font-family:dotum;"><span class="s1"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span style="color:#666666;">index,</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span><span class="s2"><span style="color:#666666;">BOOL</span></span><span class="s1"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span style="color:#666666;">*innerStop) {</span></span></span></p><br/><p class="p2"></p><br/><p class="p3"><span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">           </span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>// The end of the enumeration is signaled by asset == nil.</p><br/><p class="p4">           <span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s2"><span style="color:#666666;">if</span></span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span>(alAsset) {</p><br/><p class="p4">               <span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s4"><span style="color:#666666;">ALAssetRepresentation</span></span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span>*representation = [alAsset<span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s4"><span style="color:#666666;">defaultRepresentation</span></span></span>];</p><br/><p class="p4">               <span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s4"><span style="color:#666666;">UIImage</span></span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span>*latestPhoto = [<span style="font-family:dotum;"><span class="s4"><span style="color:#666666;">UIImage</span></span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s4"><span style="color:#666666;">imageWithCGImage</span></span></span>:[representation<span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s4"><span style="color:#666666;">fullScreenImage</span></span></span>]];</p><br/><p class="p4">                [latestPhoto<span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s5"><span style="color:#666666;">resizeImageToWidth</span></span></span>:<span class="s3"><span style="color:#666666;font-family:dotum;">50</span></span>];</p><br/><p class="p2"></p><br/><p class="p4">               <span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s2"><span style="color:#666666;">if</span></span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span>(latestPhoto){</p><br/><p class="p1"><span style="font-family:dotum;"><span class="s1"><span style="color:#666666;">                    [</span></span><span class="s2"><span style="color:#666666;">self</span></span><span class="s1"><span style="color:#666666;">.</span></span><span class="s3"><span style="color:#666666;">imgBtn</span></span><span class="s1"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>setBackgroundImage<span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">:latestPhoto</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>forState<span class="s1"><span style="color:#666666;font-family:dotum;">:</span></span>UIControlStateNormal<span class="s1"><span style="color:#666666;font-family:dotum;">];</span></span></p><br/><p class="p1"><span style="font-family:dotum;"><span class="s1"><span style="color:#666666;">                    [self.imgBtn</span></span><span class="s1"><span style="color:#666666;"> </span></span></span>setBackgroundImage<span class="s1"><span style="font-family:dotum;"><span style="color:#666666;">:latestPhoto</span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span></span>forState<span class="s1"><span style="color:#666666;font-family:dotum;">:</span></span>UIControlStateHighlighted<span class="s1"><span style="color:#666666;font-family:dotum;">];</span></span></p><br/><p class="p4">                }</p><br/><p class="p4">            }</p><br/><p class="p4">        }];</p><br/><p class="p4">    }<span style="font-family:dotum;"><span class="Apple-converted-space"><span style="color:#666666;"> </span></span><span class="s4"><span style="color:#666666;">failureBlock</span></span></span>: ^(<span style="font-family:dotum;"><span class="s4"><span style="color:#666666;">NSError</span></span><span class="Apple-converted-space"><span style="color:#666666;"> </span></span></span>*error) {</p><br/><span style="font-family:dotum;"><span style="color:#666666;">    </span><span style="color:#666666;">}];</span></span>