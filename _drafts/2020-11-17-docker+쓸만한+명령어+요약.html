---
layout: post
title: docker 쓸만한 명령어 요약
date: '2020-11-17T20:44:00.002-08:00'
author: schoolhompy
tags: 
modified_time: '2020-11-17T20:44:16.080-08:00'
blogger_id: tag:blogger.com,1999:blog-4954243635432022205.post-356454822322679302
---

<p>&nbsp;- 컨테이너를 모두 삭제</p><p>docker rm `docker ps -a -q`</p><p><br /></p><p>-모든 컨테이너&nbsp;</p><p>docker ps -a</p><p>-한번에 컨테이너, 이미지,네트워크 모두 삭제(실행중인 것 뺴고)</p><p>docker system prune</p><p><br /></p><p>Dockerfile.dev&nbsp;</p><div style="background-color: white; line-height: 18px;"><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #af00db;">FROM</span> <span style="color: #267f99;">node</span>:alpine</div><br /><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #af00db;">WORKDIR</span> <span style="color: #001080;">/usr/src/app</span></div><br /><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #af00db;">COPY</span> <span style="color: #001080;">package.json</span> <span style="color: #001080;">./</span></div><br /><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #af00db;">RUN</span> <span style="color: #001080;">npm</span> <span style="color: #001080;">install</span></div><br /><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #af00db;">VOLUME</span> <span style="color: #001080;">/usr/src/app</span></div><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #af00db;">VOLUME</span> <span style="color: #001080;">/usr/src/app/node_modules</span></div><br /><br /><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #af00db;">CMD</span> <span style="color: #001080;">[</span><span style="color: #a31515;">"npm"</span><span style="color: #001080;">,</span> <span style="color: #a31515;">"run"</span><span style="color: #001080;">,</span> <span style="color: #a31515;">"start"</span><span style="color: #001080;">]</span></div><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #001080;"><br /></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;">docker build ./ -f Dockerfile.dev -t kimtaeho/docker-react-sample</span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;"><br /></span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;">docker run -it -v /usr/src/app/node_modules -v $(pwd):/usr/src/app -p 3000:3000 kimtaeho/docker-react-sample:latest</span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;"><br /></span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;">TEST </span></span></div><div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;">docker run -it -v /usr/src/app/node_modules -v $(pwd):/usr/src/app -p 3000:3000 kimtaeho/docker-react-sample:latest npm run test</span></span></div></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;"><br /></span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;"><br /></span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;"><br /></span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;"><br /></span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;">docker Compose 　사용</span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;"><br /></span></span></div><div><span style="color: #001080; font-family: Menlo, Monaco, Courier New, monospace;"><span style="font-size: 12px; white-space: pre;"><div><div style="color: black; line-height: 18px;"><div><span style="color: maroon;">version</span>: <span style="color: #a31515;">"3"</span></div><div><span style="color: maroon;">services</span>:</div><div>  <span style="color: maroon;">myreact</span>:</div><div>    <span style="color: maroon;">build</span>:</div><div>      <span style="color: maroon;">context</span>: <span style="color: #098658;">.</span></div><div>      <span style="color: maroon;">dockerfile</span>: <span style="color: blue;">Dockerfile.dev</span></div><div>    <span style="color: maroon;">ports</span>:</div><div>      - <span style="color: #a31515;">"3000:3000"</span></div><div>    <span style="color: maroon;">volumes</span>:</div><div>      - <span style="color: blue;">/usr/src/app/node_modules</span></div><div>      - <span style="color: blue;">./:/usr/src/app</span></div><div>    <span style="color: maroon;">stdin_open</span>: <span style="color: blue;">true</span></div><div>  <span style="color: maroon;">myreact_test</span>:</div><div>    <span style="color: maroon;">build</span>:</div><div>      <span style="color: maroon;">context</span>: <span style="color: #098658;">.</span></div><div>      <span style="color: maroon;">dockerfile</span>: <span style="color: blue;">Dockerfile.dev</span></div><div>    <span style="color: maroon;">volumes</span>:</div><div>      - <span style="color: blue;">/usr/src/app/node_modules</span></div><div>      - <span style="color: blue;">./:/usr/src/app</span></div><div>    <span style="color: maroon;">command</span>: [<span style="color: #a31515;">"npm"</span>, <span style="color: #a31515;">"run"</span>, <span style="color: #a31515;">"test"</span>]</div></div></div><div><br /></div><div> context 는 도커설정파일이 있는 폴더</div><div>stdin_open는 리액트에서만 쓰임</div></span></span></div><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #001080;"><br /></span></div><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #001080;"><br /></span></div><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><span style="color: #001080;">nginx 로 정적 파일 호스팅</span></div><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; white-space: pre;"><div style="line-height: 18px;"><div><span style="color: #af00db;">FROM</span> <span style="color: #267f99;">node</span>:alpine <span style="color: #af00db;">as</span> builder</div><br /><div><span style="color: #af00db;">WORKDIR</span> <span style="color: #a31515;">'/usr/src/app'</span></div><br /><div><span style="color: #af00db;">COPY</span> <span style="color: #001080;">package.json</span> <span style="color: #001080;">./</span></div><br /><div><span style="color: #af00db;">RUN</span> <span style="color: #001080;">npm</span> <span style="color: #001080;">install</span></div><br /><div><span style="color: green;"># VOLUME /usr/src/app</span></div><div><span style="color: green;"># VOLUME /usr/src/app/node_modules</span></div><br /><div><span style="color: #af00db;">COPY</span> <span style="color: #001080;">./</span> <span style="color: #001080;">./</span></div><br /><div><span style="color: #af00db;">RUN</span> <span style="color: #001080;">npm</span> <span style="color: #001080;">run</span> <span style="color: #001080;">build</span></div><br /><div><span style="color: #af00db;">FROM</span> <span style="color: #267f99;">nginx</span></div><div><span style="color: #af00db;">COPY</span> <span style="color: #001080;">--from</span>=<span style="color: #001080;">builder</span> <span style="color: #001080;">/usr/src/app/build</span> <span style="color: #001080;">/usr/share/nginx/html</span></div><div><span style="color: #001080;"><br /></span></div><div><span style="color: #001080;"><br /></span></div><div><span style="color: #001080;"><br /></span></div></div></div></div>